---
description: Main project workflow and coding rules for all AI agents on this project
alwaysApply: true
---

# Law-Corp MCP — Project Rules

> **See `CLAUDE.md` at the repo root for the full authoritative rule set.**

---

## Git

**Never create git commits.** Implement code, verify it, and hand off to the developer.

---

## Critical Code Conventions

### No Magic Strings

Enumerable string values are defined once as `const string` fields in dedicated constant classes. Never write raw string literals for these categories anywhere in code.

**MCP tool names** → `src/LawCorp.Mcp.Core/McpToolName.cs`

```csharp
// ✅ CORRECT
[McpServerTool(Name = McpToolName.Cases.Search), Description("...")]

// ❌ WRONG
[McpServerTool(Name = "cases_search"), Description("...")]
```

**Web app routes** → `src/LawCorp.Mcp.Web/WebRoutes.cs`

```csharp
// ✅ CORRECT
Navigation.NavigateTo(WebRoutes.Auth.SignIn, forceLoad: true);
<FluentNavLink Href="@WebRoutes.Tools">Tools</FluentNavLink>

// ❌ WRONG
Navigation.NavigateTo("MicrosoftIdentity/Account/SignIn", forceLoad: true);
<FluentNavLink Href="/tools">Tools</FluentNavLink>
```

Note: Blazor `@page` directives require string literals — that is the one exception.

**Configuration keys** → `src/LawCorp.Mcp.Web/AppConfigKeys.cs`

```csharp
// ✅ CORRECT
config.GetValue<bool>(AppConfigKeys.UseAuth)

// ❌ WRONG
config.GetValue<bool>("UseAuth")
```

**Custom claim types** → `src/LawCorp.Mcp.Web/AppClaimTypes.cs`

```csharp
// ✅ CORRECT
c.Type == AppClaimTypes.Roles

// ❌ WRONG
c.Type == "roles"
```

### `McpServerToolAttribute.Name` Must Always Be Set

Do not rely on SDK PascalCase→snake_case convention. Always set `Name` explicitly from `McpToolName`.

### EF Core

- Never set explicit IDs for operational entities
- Use `ValueGeneratedNever()` only for reference/lookup data
- Load navigation properties explicitly before accessing them

### Config

- Use `appsettings.Development.json` (gitignored) + `.example` (tracked) pattern
- Never hardcode secrets or connection strings

---

## Project Management

Work items live in `proj-mgmt/epics/NN-slug/`. Always read the item file before implementing. Update `**Status:**` and check off acceptance criteria when done. See `CLAUDE.md` for full workflow rules.

---

## Communication

When SDK internals are hard to access (e.g., NuGet DLLs), ask the user directly instead of using decompilers or other indirect tools.

Default to updating local project rules (`CLAUDE.md`, `.cursor/rules/`) so other developers benefit — not global user config.

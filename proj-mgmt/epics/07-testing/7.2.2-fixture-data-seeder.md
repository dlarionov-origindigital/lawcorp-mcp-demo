# 7.2.2: Fixture data seeder

**Status:** BACKLOG
**Type:** Task
**Feature:** [7.2: Persona Fixture](./7.2-persona-fixture.md)
**Tags:** `+testing` `+infrastructure`

---

Implement `PersonaFixtureSeeder`, which populates the test DB with the minimal controlled dataset described in the persona fixture relationship map. This seeder runs once per `LawCorpWebApplicationFactory` instance and is idempotent.

## Implementation Steps

- [ ] Create `LawCorp.Mcp.Tests/Personas/PersonaFixtureSeeder.cs`
- [ ] Seed practice groups (IDs 101, 102, 103) — M&A, Corporate Governance, Securities & Compliance
- [ ] Seed six persona records into their respective entity tables (Attorney for Harvey/Kim/Alan, Paralegal for Erin, LegalAssistant for Elle, Intern for Vinny) using IDs from `PersonaCatalog`
- [ ] Seed clients:
  - `Acme Corp` (client ID 2001) — associated with Case Alpha and Case Beta
  - `Globex Corp` (client ID 2002) — associated with Case Gamma
- [ ] Seed courts and judges (minimal — one per case)
- [ ] Seed cases:
  - `Case Alpha` (ID 3001) — M&A practice group, `Acme Corp`, Active status
  - `Case Beta` (ID 3002) — M&A practice group, `Acme Corp`, Active status
  - `Case Gamma` (ID 3003) — Securities practice group, `Globex Corp`, Active status
- [ ] Seed `CaseAssignment` records per the relationship map in 7.2
- [ ] Seed one `Document` on Case Alpha with `IsPrivileged=true`, authored by Harvey Specter (ID 4001)
- [ ] Seed one `Invoice` on Case Alpha (ID 5001)
- [ ] Seed one `Deadline` on Case Alpha (ID 6001) assigned to Kim Wexler
- [ ] Seed one `ResearchMemo` on Case Alpha, authored by Kim Wexler (ID 7001)
- [ ] Expose a static `async Task SeedAsync(LawCorpDbContext context)` method callable from `LawCorpWebApplicationFactory`
- [ ] Guard for idempotency: skip seeding if any persona with ID 1001 already exists

## Acceptance Criteria

- [ ] Seeder runs in < 500ms against SQLite in-memory
- [ ] All entity relationships are navigable (no FK violations)
- [ ] IDs for all seeded entities are stable and documented in this file
- [ ] Running `SeedAsync` twice produces identical DB state (idempotent)
- [ ] The full `MockDataSeeder` can co-exist with `PersonaFixtureSeeder` without ID collisions (verify ID ranges do not overlap)

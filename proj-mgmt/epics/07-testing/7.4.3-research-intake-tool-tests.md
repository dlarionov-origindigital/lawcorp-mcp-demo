# 7.4.3: Research & intake tool tests

**Status:** BACKLOG
**Type:** Story
**Feature:** [7.4: Tool E2E Tests](./7.4-tool-e2e-tests.md)
**Tags:** `+testing` `+research` `+intake`

---

As a QA engineer,
I want E2E tests for the legal research and intake tools,
So that research access and the intake approval workflow are validated end-to-end across roles.

## Tools Covered

`research_search_precedents`, `research_get_statute`, `research_get_memo`, `research_create_memo`, `research_search_memos`, `intake_create_request`, `intake_get_request`, `intake_run_conflict_check`, `intake_approve`, `intake_generate_engagement_letter`

## Acceptance Criteria

- [ ] `research_search_precedents` succeeds for `HarveySpecter`, `KimWexler`, `AlanShore` (all attorney roles); returns authorization error for `ElleWoods` (Legal Assistant has no research access)
- [ ] `research_create_memo` as `VinnyGambini` on Case Alpha succeeds (Intern can create memos per PRD)
- [ ] `research_get_memo` for memo 7001 as `VinnyGambini` succeeds (own memo); as `ElleWoods` returns authorization error
- [ ] `intake_create_request` as `HarveySpecter` succeeds; as `AlanShore` returns authorization error (OfCounsel has no intake access)
- [ ] `intake_approve` as `HarveySpecter` succeeds (Partner only); as `KimWexler` returns authorization error
- [ ] `intake_approve` as `VinnyGambini` returns authorization error (Intern has no intake access)
- [ ] `intake_generate_engagement_letter` as `HarveySpecter` returns a generated document reference
- [ ] `intake_run_conflict_check` as `KimWexler` succeeds (Associate can create intake requests and run checks)

## Notes

The intake workflow is sequential: `create_request` → `run_conflict_check` → `approve`. Tests for `intake_approve` depend on a pending intake request existing in the fixture; add one to `PersonaFixtureSeeder` (7.2.2) when implementing this story.

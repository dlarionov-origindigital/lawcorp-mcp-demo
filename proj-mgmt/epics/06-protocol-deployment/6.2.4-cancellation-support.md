# 6.2.4: Implement cancellation support

**Status:** BACKLOG
**Type:** Task
**Feature:** [6.2: Cross-Cutting Protocol Features](./6.2-protocol-features.md)
**Tags:** `+protocol`

---

- [ ] Support `CancellationToken` for all long-running operations
- [ ] Implement MCP cancellation protocol (`$/cancelRequest`)
- [ ] Clean up partial state on cancellation (no orphaned DB writes)
- [ ] Return appropriate cancellation response to client

## Acceptance Criteria

- [ ] All long-running tool handlers accept and honour `CancellationToken`
- [ ] Cancellation leaves the database in a consistent state
- [ ] Client receives a well-formed cancellation response (not an error)
- [ ] EF Core queries use the cancellation token on async calls

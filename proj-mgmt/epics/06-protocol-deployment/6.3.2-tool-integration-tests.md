# 6.3.2: Write integration tests for MCP tool handlers

**Status:** BACKLOG
**Type:** Task
**Feature:** [6.3: Testing](./6.3-testing.md)
**Tags:** `+protocol`

---

- [ ] Test each tool handler with at least two role contexts (authorized and unauthorized)
- [ ] Test pagination: verify cursor, `hasMore`, and `totalCount` across pages
- [ ] Test progress notifications are emitted for long-running tools
- [ ] Test cancellation: verify clean state after mid-operation cancel
- [ ] Test error responses for invalid inputs and unauthorized access
- [ ] Use in-memory EF Core database or deterministic test fixtures (MockData project)

## Acceptance Criteria

- [ ] Every tool has at least one happy-path and one unauthorized-access test
- [ ] Pagination tests cover first page, middle page, and last page
- [ ] Progress tests verify at least two distinct progress notifications
- [ ] Cancellation tests verify no orphaned DB writes
- [ ] All tests are hermetic (no network, no real DB required)

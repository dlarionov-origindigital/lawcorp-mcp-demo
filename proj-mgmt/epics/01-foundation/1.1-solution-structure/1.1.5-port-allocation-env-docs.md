# 1.1.5: Port Allocation & Environment Documentation

**Status:** DONE
**Type:** Task
**Feature:** [1.1 Solution & Project Structure](./1.1-solution-structure.md)

## Goal

Resolve port conflicts between services and document the multi-service local development setup.

## Acceptance Criteria

- [x] Web App port changed from 5002 to 5003 (HTTP) / 5001 (HTTPS) to avoid collision with External API
- [x] MCP Server launch profile added with explicit port 5000
- [x] External API confirmed on port 5002 (HTTP) / 7002 (HTTPS)
- [x] Port allocation table added to `RULES.md`
- [x] `docs/local-dev.md` updated with multi-service startup instructions
- [x] `docs/local-dev.md` includes port conflict troubleshooting (Windows `netstat` / `taskkill`)
- [x] `docs/local-dev.md` documents both databases (`LawCorpLocal`, `LawCorpDms`)
- [x] `docs/local-dev.md` includes data flow diagram (which tools hit which data source)
- [x] `src/README.md` updated with new projects table (including ports)
- [x] `src/README.md` updated with project reference graph

## Bug Fixed

This resolves the `System.IO.IOException: Failed to bind to address http://127.0.0.1:5002: address already in use` error that occurred when the Web App and External API both tried to bind to port 5002.

## Port Allocation

| Service | HTTP | HTTPS | Project |
|---|---|---|---|
| MCP Server | 5000 | â€” | `LawCorp.Mcp.Server` |
| Web App | 5003 | 5001 | `LawCorp.Mcp.Web` |
| External API (DMS) | 5002 | 7002 | `LawCorp.Mcp.ExternalApi` |

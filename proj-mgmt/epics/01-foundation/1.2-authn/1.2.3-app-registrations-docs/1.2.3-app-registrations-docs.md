# 1.2.3: Set up Entra ID app registrations documentation

**Status:** IN PROGRESS
**Type:** Task
**Feature:** [1.2: Authentication — Microsoft Entra ID](../1.2-authentication.md)
**Tags:** `+auth`
**Setup Guide:** [`docs/auth-config.md`](../../../../../docs/auth-config.md)

---

- [x] Document required app registrations — three registrations: MCP server, web app, external API
- [x] Document API permissions and scopes — include Graph scopes and external API scopes required for identity passthrough (see [ADR-005](../../../../decisions/005-oauth-identity-passthrough.md) and [1.2.4](../../1.1-solution-structure/1.2.4-downstream-resource-access/1.2.4-downstream-resource-access.md))
- [x] Document role definitions to be configured in Entra ID
- [x] Document the Graph API delegated permissions: `User.Read`, `Calendars.Read`, `Calendars.ReadWrite`, `Sites.Read.All`, `Mail.Read` (minimum set; adjust per implemented tools)
- [x] Document the external API delegated permissions: `data.read`, `data.write`
- [ ] Document the OAuth identity passthrough configuration for Azure Foundry deployment (cross-reference [6.4.4](../../06-protocol-deployment/6.4.4-foundry-oauth-passthrough-config.md))
- [ ] Provide a setup script or ARM/Bicep template for all three app registrations

## Bugs

| ID | Title | Status |
|---|---|---|
| [1.2.3.1](./bugs/1.2.3.1-app-registration-architecture-mismatch.md) | App registration architecture insufficient for true OBO demonstration | OPEN |

## Research

| Title | File |
|---|---|
| App Registration Architecture for Multi-Tier OBO | [RESEARCH-app-registration-architecture.md](./RESEARCH-app-registration-architecture.md) |

## Acceptance Criteria

- [x] App registration documentation covers all three registrations (MCP server, web app, external API)
- [x] API permissions and scopes are fully documented, including Graph and external API delegated scopes for OBO
- [x] Role definitions match the application permissions matrix
- [ ] Foundry OAuth passthrough redirect URI is documented
- [ ] Setup script or ARM/Bicep template automates creation of all three app registrations

## Notes

ARM/Bicep template will also feed into Epic 6 deployment work.
Graph scopes should follow least-privilege per [ADR-005](../../../../decisions/005-oauth-identity-passthrough.md).
The three-registration architecture was identified via [BUG 1.2.3.1](./bugs/1.2.3.1-app-registration-architecture-mismatch.md) and researched in [RESEARCH-app-registration-architecture.md](./RESEARCH-app-registration-architecture.md).

# 8.1.4: App registration and redirect URI configuration

**Status:** BACKLOG
**Type:** Task
**Feature:** [8.1: Blazor Project Foundation](./8.1-blazor-project-foundation.md)
**Tags:** `+web-app` `+auth`

---

Configure the Entra ID app registration to support the Blazor web app's OIDC redirect flow, either by creating a new app registration or adding a redirect URI to the existing MCP server registration.

## Implementation Steps

- [ ] Decide: single multi-platform app registration (shared with MCP server) or separate registration for the web app
  - **Recommended:** Separate registration â€” cleaner token audience isolation, easier to manage scopes independently
- [ ] If separate registration:
  - Create a new app registration named `LawCorp Web App`
  - Set supported account types to single tenant
  - Add redirect URI: `https://localhost:5001/signin-oidc` (for local dev)
  - Add front-channel logout URL: `https://localhost:5001/signout-oidc`
  - Under **API permissions**, add a delegated permission for the MCP server's exposed API: `api://<MCP-server-client-id>/access_as_user`
  - Create a client secret (for development)
  - Grant admin consent
- [ ] If shared registration:
  - Add the redirect URI `https://localhost:5001/signin-oidc` to the existing `LawCorp MCP Server` registration
  - Add the front-channel logout URL
- [ ] Assign all six persona users to the web app registration (same role assignments as the MCP server)
- [ ] Update [docs/auth-config.md](../../../docs/auth-config.md) with the new registration steps
- [ ] Update [1.2.3 app registrations docs](../01-foundation/1.2.3-app-registrations-docs.md) cross-reference

## Acceptance Criteria

- [ ] The web app can complete the OIDC redirect flow against Entra ID
- [ ] The acquired token's `aud` claim matches `api://<MCP-server-client-id>` (for OBO to MCP server) or the web app's own client ID (depending on registration strategy)
- [ ] All six personas can log in to the web app
- [ ] Documentation is updated with the new redirect URI and registration steps

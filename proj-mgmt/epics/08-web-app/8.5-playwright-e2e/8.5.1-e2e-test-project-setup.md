# 8.5.1: E2E test project setup (`LawCorp.Mcp.Tests.E2E`)

**Status:** DONE
**Type:** Task
**Feature:** [8.5: Playwright E2E Tests](./8.5-playwright-e2e.md)
**Tags:** `+web-app` `+testing` `+e2e`

---

Create the Playwright E2E test project, configure it for .NET + Playwright, and establish the project structure.

## Implementation Steps

- [x] Create `LawCorp.Mcp.Tests.E2E` as an xUnit test project in `src/`
- [x] Add NuGet packages: `Microsoft.Playwright`, `Microsoft.AspNetCore.Mvc.Testing`
- [x] Add to `src/LawCorp.Mcp.sln`
- [ ] Install Playwright browsers: `pwsh bin/Debug/net9.0/playwright.ps1 install`
- [x] Create project structure:
  ```
  LawCorp.Mcp.Tests.E2E/
    .auth/                          ← gitignored; storage state files
    Auth/
      EntraLoginHelper.cs           ← automates Entra ID browser login
    Fixtures/
      WebAppFixture.cs              ← hosts Blazor app + shared Playwright browser
      PersonaCredentials.cs         ← reads persona credentials from env vars
    Tests/
      SignInFlowTests.cs            ← core sign-in / sign-out E2E tests
      HeaderSignInLinkTests.cs      ← header sign-in link navigation tests (8.6.1)
    .env.example                    ← template for persona credential env vars
    README.md                       ← setup and run instructions
  ```
- [x] Add `.auth/` and `.env` to `.gitignore`
- [x] Configure test trait: `[Trait("Category", "E2E")]` on all test classes
- [x] Add `WebAppFixture` that hosts the Blazor web app via `WebApplicationFactory<Program>`

## Acceptance Criteria

- [x] The project builds and Playwright tests are structured (navigate, login, assert)
- [x] Browser installation is documented in `README.md`
- [x] `.auth/` directory and `.env` file are gitignored
- [x] All test classes use `[Trait("Category", "E2E")]` for CI gating
- [x] `WebAppFixture` hosts the Blazor web app via `WebApplicationFactory<Program>`

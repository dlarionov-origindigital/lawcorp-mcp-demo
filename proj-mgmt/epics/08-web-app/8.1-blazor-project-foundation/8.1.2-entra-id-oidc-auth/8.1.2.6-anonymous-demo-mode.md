# 8.1.2.6: Anonymous Demo Mode (UseAuth=false)

**Status:** DONE
**Type:** Task
**Story:** [8.1.2: Entra ID OIDC Sign-In](./8.1.2-entra-id-oidc-auth.md)

## Description

Ensure the web app works gracefully when `UseAuth=false` — all pages load, Blazor `<AuthorizeView>` components render the `<NotAuthorized>` template, and no exceptions are thrown due to missing auth services.

## Implementation

- `Routes.razor` uses `RouteView` (not `AuthorizeRouteView`) so no forced redirect occurs
- `AddAuthorization()` is called unconditionally in `Program.cs` so authorization services resolve
- `AddCascadingAuthenticationState()` propagates the (unauthenticated) auth state to all components
- When `UseAuth=false`, no OIDC middleware runs and `HttpContext.User` is an anonymous principal
- `<AuthorizeView>` sees an unauthenticated user → renders "Not signed in" content
- The "Sign in" button still appears in the header but navigating to it will 404 (no Identity UI controllers registered) — this is expected behavior for demo mode

## Key Files

- `src/LawCorp.Mcp.Web/Program.cs`
- `src/LawCorp.Mcp.Web/Components/Routes.razor`
